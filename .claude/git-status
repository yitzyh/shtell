#!/bin/bash

# Claude Code slash command: /git-status
# Show current branch, worktree path, and recent commits

echo "ğŸ“‹ Git Status Summary"
echo "===================="

# Current location and branch
echo "ğŸ“ Current Location: $(pwd)"
echo "ğŸŒ¿ Current Branch: $(git branch --show-current)"

# Worktree info for current location
echo ""
echo "ğŸŒ³ Current Worktree:"
git worktree list | grep "$(pwd)" | head -1

# Recent commits on current branch
echo ""
echo "ğŸ“ Recent Commits (last 5):"
git log --oneline -5 --decorate

# Working tree status
echo ""
echo "ğŸ”„ Working Tree Status:"
git status --porcelain | head -10 || echo "   Clean working tree"

# Ahead/behind status relative to origin
echo ""
echo "ğŸ“Š Sync Status with Origin:"
if git rev-parse --abbrev-ref @{u} >/dev/null 2>&1; then
    ahead=$(git rev-list --count @{u}..HEAD)
    behind=$(git rev-list --count HEAD..@{u})
    if [ "$ahead" -gt 0 ] && [ "$behind" -gt 0 ]; then
        echo "   âš ï¸  Ahead $ahead, behind $behind commits"
    elif [ "$ahead" -gt 0 ]; then
        echo "   â¬†ï¸  Ahead $ahead commits"
    elif [ "$behind" -gt 0 ]; then
        echo "   â¬‡ï¸  Behind $behind commits"
    else
        echo "   âœ… Up to date"
    fi
else
    echo "   â„¹ï¸  No upstream branch set"
fi